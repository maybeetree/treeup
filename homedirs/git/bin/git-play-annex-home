#!/bin/sh
hostname="$(hostname)"
remote="$1"
#path="$(realpath "$PWD")"
path="$(realpath "$PWD" --relative-to "$HOME")"

if [ -z "$remote" ]
then
	echo "no remote, use bbox.home?"
	read n
	remote=bbox.home
fi

#git status | grep 'working tree clean' || exit 1


#ssh bbox.home -C 'rm -rf "'"$path"'"; mkdir -p "'"$path"'"; cd "'"$path"'"; git init'
ssh "$remote" -C 'if [ ! -d "$HOME/'"$path"'/.git" ]; then mkdir -p "$HOME/'"$path"'"; cd "'"$path"'"; git init; fi'
git remote add "$remote" "ssh://$remote/~/$path"


